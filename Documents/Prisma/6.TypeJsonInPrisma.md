# Kiểu json trong prisma
docs: https://www.prisma.io/docs/orm/prisma-client/special-fields-and-types/working-with-json-fields


1. Cài thư viện  "prisma-json-types-generator": "^3.2.3",
2. Tạo file types.ts
- File types.ts trong src
```ts
import { VariantsType } from 'src/routes/product/product.model'

declare global {
  //   namespace PrismaJson {
  //     type Variants = VariantsType

  //   }
  type Variants = VariantsType
}

// This file must be a module.
export {}

```
3. Thêm provider prisma-json-types-generator và type **Variants** vào model schema.prisma
```prisma
generator json {
  provider = "prisma-json-types-generator"
}

model Product {
  id                  Int                  @id @default(autoincrement())
  publishedAt         DateTime?
  name                String               @db.VarChar(500)
  basePrice           Float
  virtualPrice        Float
  brandId             Int
  brand               Brand                @relation(fields: [brandId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  images              String[]
  categories          Category[]
  /// [Variants]
  variants            Json
  skus                SKU[]
  reviews             Review[]
  productTranslations ProductTranslation[]
  orders              Order[]
  productSKUSnapshots ProductSKUSnapshot[]

  createdById Int
  createdBy   User  @relation("ProductCreatedBy", fields: [createdById], references: [id], onDelete: Cascade, onUpdate: NoAction)
  updatedById Int?
  updatedBy   User? @relation("ProductUpdatedBy", fields: [updatedById], references: [id], onDelete: SetNull, onUpdate: NoAction)
  deletedById Int?
  deletedBy   User? @relation("ProductDeletedBy", fields: [deletedById], references: [id], onDelete: SetNull, onUpdate: NoAction)

  deletedAt DateTime?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  @@index([deletedAt])
}
```

4. Chạy CLI
- npx prisma generate
